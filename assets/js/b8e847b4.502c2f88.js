"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5182],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return u}});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),s=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=s(e.components);return a.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),c=s(t),u=o,g=c["".concat(l,".").concat(u)]||c[u]||m[u]||r;return t?a.createElement(g,i(i({ref:n},d),{},{components:t})):a.createElement(g,i({ref:n},d))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=c;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var s=2;s<r;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},8215:function(e,n,t){var a=t(7294);n.Z=function(e){var n=e.children,t=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:o},n)}},5064:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(7294),o=t(9443);var r=function(){var e=(0,a.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=t(6010),p="tabItem_1uMI",l="tabItemActive_2DSg";var s=function(e){var n,t=e.lazy,o=e.block,s=e.defaultValue,d=e.values,m=e.groupId,c=e.className,u=a.Children.toArray(e.children),g=null!=d?d:u.map((function(e){return{value:e.props.value,label:e.props.label}})),h=null!=s?s:null==(n=u.find((function(e){return e.props.default})))?void 0:n.props.value,k=r(),v=k.tabGroupChoices,f=k.setTabGroupChoices,y=(0,a.useState)(h),N=y[0],w=y[1],b=[];if(null!=m){var C=v[m];null!=C&&C!==N&&g.some((function(e){return e.value===C}))&&w(C)}var x=function(e){var n=e.currentTarget,t=b.indexOf(n),a=g[t].value;w(a),null!=m&&(f(m,a),setTimeout((function(){var e,t,a,o,r,i,p,s;(e=n.getBoundingClientRect(),t=e.top,a=e.left,o=e.bottom,r=e.right,i=window,p=i.innerHeight,s=i.innerWidth,t>=0&&r<=s&&o<=p&&a>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(l),setTimeout((function(){return n.classList.remove(l)}),2e3))}),150))},j=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a=b.indexOf(e.target)+1;t=b[a]||b[0];break;case"ArrowLeft":var o=b.indexOf(e.target)-1;t=b[o]||b[b.length-1]}null==(n=t)||n.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":o},c)},g.map((function(e){var n=e.value,t=e.label;return a.createElement("li",{role:"tab",tabIndex:N===n?0:-1,"aria-selected":N===n,className:(0,i.Z)("tabs__item",p,{"tabs__item--active":N===n}),key:n,ref:function(e){return b.push(e)},onKeyDown:j,onFocus:x,onClick:x},null!=t?t:n)}))),t?(0,a.cloneElement)(u.filter((function(e){return e.props.value===N}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},u.map((function(e,n){return(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==N})}))))}},9443:function(e,n,t){var a=(0,t(7294).createContext)(void 0);n.Z=a},1801:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return d},metadata:function(){return m},toc:function(){return c},default:function(){return g}});var a=t(7462),o=t(3366),r=(t(7294),t(3905)),i=t(5064),p=t(8215),l=["components"],s={id:"creating-a-plugin",title:"Creating a Plugin",sidebar_label:"Creating a Plugin"},d=void 0,m={unversionedId:"development/creating-a-plugin",id:"development/creating-a-plugin",isDocsHomePage:!1,title:"Creating a Plugin",description:"You may need to add and modify some files to properly set up libraries with your Next.js project. What we call plugin is a directory with all the packages you need to install and the files you need to add and modify.",source:"@site/docs/development/creating-a-plugin.md",sourceDirName:"development",slug:"/development/creating-a-plugin",permalink:"/superplate/docs/development/creating-a-plugin",editUrl:"https://github.com/pankod/superplate/tree/master/documentation/docs/development/creating-a-plugin.md",tags:[],version:"current",lastUpdatedBy:"Y\u0131ld\u0131ray \xdcnl\xfc",lastUpdatedAt:1626439560,formattedLastUpdatedAt:"7/16/2021",frontMatter:{id:"creating-a-plugin",title:"Creating a Plugin",sidebar_label:"Creating a Plugin"},sidebar:"someSidebar",previous:{title:"How it Works?",permalink:"/superplate/docs/development/how-it-works"},next:{title:"References",permalink:"/superplate/docs/development/references"}},c=[{value:"Preparing the Development Environment",id:"preparing-the-development-environment",children:[]},{value:"Creating a Plugin Directory",id:"creating-a-plugin-directory",children:[]},{value:"Adding Plugin to the Prompts",id:"adding-plugin-to-the-prompts",children:[]},{value:"Creating a <code>package.json</code>",id:"creating-a-packagejson",children:[]},{value:"Modifying <code>package.json</code> with User Answers",id:"modifying-packagejson-with-user-answers",children:[]},{value:"Using Templates",id:"using-templates",children:[{value:"Modifying the <code>App</code> and the <code>Document</code>",id:"modifying-the-app-and-the-document",children:[]},{value:"Defining Custom Data",id:"defining-custom-data",children:[]}]},{value:"Custom <code>tsconfig.json</code>",id:"custom-tsconfigjson",children:[]},{value:"Custom <code>.babelrc</code>",id:"custom-babelrc",children:[]},{value:"Providing a Plugin Description",id:"providing-a-plugin-description",children:[]},{value:"Conclusion",id:"conclusion",children:[]}],u={toc:c};function g(e){var n=e.components,t=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"You may need to add and modify some files to properly set up libraries with your Next.js project. What we call ",(0,r.kt)("strong",{parentName:"p"},"plugin")," is a directory with all the packages you need to install and the files you need to add and modify."),(0,r.kt)("p",null,"This article will show you how to create a superplate plugin from scratch and the ways superplate offers you to interact with other plugins in your source. "),(0,r.kt)("p",null,"Let's create a plugin to add ",(0,r.kt)("a",{parentName:"p",href:"https://styled-components.com"},"styled-components")," to our project easily. "),(0,r.kt)("h3",{id:"preparing-the-development-environment"},"Preparing the Development Environment"),(0,r.kt)("p",null,"Before we start plugin development,  ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate"},"superplate")," repo need to know how to consume your local plugins repository where you make development."),(0,r.kt)("p",null,"Firstly, clone the main ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate.git"},"superplate repo"),", then navigate to folder and run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm run dev:cli\n")),(0,r.kt)("p",null,"Keep it running during the plugin development phase."),(0,r.kt)("p",null,"Then, clone the plugins repository for ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate-core-plugins"},"Next.js")," or ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate-react-core-plugins"},"React"),"."),(0,r.kt)("p",null,"Change the values one with in the following commands: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"repo-name")," is for newly boilerplate project name to be created.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"plugin-repo-directory")," with absolute path where the plugins repository cloned in to."))),(0,r.kt)(i.Z,{defaultValue:"next",values:[{label:"Next.js",value:"next"},{label:"React",value:"react"}],mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"next",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"node superplate/lib/index {repo-name} --source {plugin-repo-root-directory}\n"))),(0,r.kt)(p.Z,{value:"react",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"node superplate/lib/index {repo-name} --source {plugin-repo-root-directory}\n")))),(0,r.kt)("p",null,"Whenever this commands are running, superplate will be listening and using the local plugin repo that you are working on development."),(0,r.kt)("p",null,"So now, you can modify or add new plugins and test it by creating new superplate boilerplates."),(0,r.kt)("h3",{id:"creating-a-plugin-directory"},"Creating a Plugin Directory"),(0,r.kt)("p",null,"Let's start with creating a directory for our plugin inside our source's ",(0,r.kt)("inlineCode",{parentName:"p"},"plugins")," directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir plugins/styled-components\n")),(0,r.kt)("h3",{id:"adding-plugin-to-the-prompts"},"Adding Plugin to the Prompts"),(0,r.kt)("p",null,"We need to add our plugin to appropriate place in ",(0,r.kt)("inlineCode",{parentName:"p"},"prompt.js")," file. We can ask the user for a styling and place ",(0,r.kt)("inlineCode",{parentName:"p"},"styled-components")," inside it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'module.exports = {\n    prompts: [\n        {\n            name: "styling",\n            message: "How would you like to style your apps?",\n            type: "select",\n            choices: [\n                { message: "None", name: "none" },\n                { message: "styled-components", name: "styled-components" },\n            ],\n            default: "none",\n        },\n    ]\n}\n')),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Make sure ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"value")," property for the choice is the same with the directory name you've created."))),(0,r.kt)("h2",{id:"creating-a-packagejson"},"Creating a ",(0,r.kt)("inlineCode",{parentName:"h2"},"package.json")),(0,r.kt)("p",null,"Let's create a ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," inside the plugin directory. We need to add ",(0,r.kt)("inlineCode",{parentName:"p"},"styled-components")," package and the ",(0,r.kt)("inlineCode",{parentName:"p"},"babel-plugin-styled-components")," to properly support SSR. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "dependencies": {\n      "styled-components": "^5.2.1"\n    },\n    "devDependencies": {\n      "babel-plugin-styled-components": "^1.12.0"\n    }\n}\n')),(0,r.kt)("h2",{id:"modifying-packagejson-with-user-answers"},"Modifying ",(0,r.kt)("inlineCode",{parentName:"h2"},"package.json")," with User Answers"),(0,r.kt)("p",null,"Let's say that we want to prompt the users, asking them if they want to include the support for SSR."),(0,r.kt)("p",null,"We can do so by simply modifying our ",(0,r.kt)("inlineCode",{parentName:"p"},"prompt.js"),". Append below codes to your prompts array. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'{\n    name: "ssr",\n    message: "Do you want styled-components to support SSR?",\n    // This will be a Yes/No question\n    type: "confirm",\n    // We want to skip this question if styled-components is not selected.\n    skip: ({answers}) => answers.styling !== "styled-components",\n}\n')),(0,r.kt)("p",null,"And if this prompt is not answered ",(0,r.kt)("em",{parentName:"p"},"Yes")," we want to remove the babel plugin from ",(0,r.kt)("inlineCode",{parentName:"p"},"devDependencies"),". We can do that by creating a ",(0,r.kt)("inlineCode",{parentName:"p"},"package.js")," inside our plugin."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'module.exports = {\n    /**\n     * package: the current content of your package.json\n     * answers: array of given user answers to the prompts \n     */\n    apply(package, answers) {\n        if (answers.ssr === false) {\n            delete package.devDependencies[\n                "babel-plugin-styled-components"\n            ];\n        }\n        return package;\n    },\n};\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We will be handling this plugin later in ",(0,r.kt)("a",{parentName:"p",href:"#custom-babelrc"},"Custom ",(0,r.kt)("inlineCode",{parentName:"a"},".babelrc"))," section."))),(0,r.kt)("h2",{id:"using-templates"},"Using Templates"),(0,r.kt)("p",null,"We have handled the dependencies for our plugin. Now, let's add an example component. First, we need two files ",(0,r.kt)("inlineCode",{parentName:"p"},"styled.ts")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"example.tsx"),". We will place them under ",(0,r.kt)("inlineCode",{parentName:"p"},"plugins/styled-components/src/components/example"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"styled.ts")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import styled from "styled-components";\n\nexport const StyledContainer = styled.main`\n    padding: 1rem;\n    margin: 0 auto;\n    max-width: 32rem;\n`;\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"example.tsx")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from "react";\nimport { StyledContainer } from "./styled";\n\nexport const ExampleComponent: React.FC = () => {\n    return (\n        <StyledContainer>\n            <h2>This is an example component with styled-components</h2>\n            <%_ if (answers.ssr === true) { _%>\n            <small>and with SSR!</small>\n            <%_ } _%>\n            <p>some text</p>\n        </StyledContainer>\n    )\n}\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We can use EJS in our files. superplate will process all ejs templates while creating a project. If you want to learn more about the available template data; please check out ",(0,r.kt)("a",{parentName:"p",href:"references#templates"},"References#templates")))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"modifying-the-app-and-the-document"},"Modifying the ",(0,r.kt)("inlineCode",{parentName:"h3"},"App")," and the ",(0,r.kt)("inlineCode",{parentName:"h3"},"Document")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Since ",(0,r.kt)("inlineCode",{parentName:"p"},"Document")," file is special for Next.js apps, you can ignore intructions about ",(0,r.kt)("inlineCode",{parentName:"p"},"Document"),", if you are developing plugins for React."))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://styled-components.com/docs/advanced#theming"},"styled-components")," has full support for theming. In order to use themes in our entire app; We need to modify newly create boilerplates ",(0,r.kt)("inlineCode",{parentName:"p"},"<App>")," component.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"superplate"),"'s base template allows you to modify ",(0,r.kt)("inlineCode",{parentName:"p"},"<App>")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"<Document>"),"; to wrap styled-component's ",(0,r.kt)("inlineCode",{parentName:"p"},"ThemeProvider")," we need to create an ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.js")," file."),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p"},"superplate")," will merge all ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.js")," content and pass it to your templates. You only need to cover modifications for your plugin in plugin's ",(0,r.kt)("inlineCode",{parentName:"p"},"extend.js")," file."))),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'const base = {\n    _app: {\n        // _app.import will be appended to the import section in pages/_app.tsx file.\n        import: [\n            \'import { ThemeProvider } from "styled-components";\',\n        ],\n        // _app.inner will be appended to the inner code section of the custom App.\n        inner: [\n            `const theme = {\n                main: "mediumseagreen"\n            }`,\n        ],\n        // _app.wrapper will wrap the return statement of the custom App.\n        wrapper: [["<ThemeProvider theme={theme}>", "</ThemeProvider>"]],\n    },\n};\n\nmodule.exports = {\n    extend() {\n        return base;\n    },\n};\n')),(0,r.kt)("br",null),(0,r.kt)(i.Z,{defaultValue:"next",values:[{label:"Next.js",value:"next"},{label:"React",value:"react"}],mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"next",mdxType:"TabItem"},(0,r.kt)("p",null,"Since we try to add SSR support. We also need to modify the custom ",(0,r.kt)("inlineCode",{parentName:"p"},"Document"),". Let's add the required codes for ",(0,r.kt)("inlineCode",{parentName:"p"},"_document.tsx")," and only apply them if we select SSR support."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'const base = {\n    _app: {\n        import: [\n            \'import { ThemeProvider } from "styled-components";\',\n        ],\n        inner: [\n            `const theme = {\n                main: "mediumseagreen"\n            }`,\n        ],\n        wrapper: [["<ThemeProvider theme={theme}>", "</ThemeProvider>"]],\n    },\n    _document: {\n        import: [\'import { ServerStyleSheet } from "styled-components";\'],\n        initialProps: [\n            `const sheet = new ServerStyleSheet();\n            const originalRenderPage = ctx.renderPage;\n            try {\n                ctx.renderPage = () =>\n                    originalRenderPage({\n                        enhanceApp: (App) => (props) =>\n                            sheet.collectStyles(<App {...props} />),\n                    });\n                const initialProps = await Document.getInitialProps(ctx);\n                return {\n                    ...initialProps,\n                    styles: (\n                        <>\n                            {initialProps.styles}\n                            {sheet.getStyleElement()}\n                        </>\n                    ),\n                };\n            } finally {\n                sheet.seal();\n            }`,\n        ],\n        wrapper: [],\n    },\n};\n\nmodule.exports = {\n    extend(answers) {\n        if (!answers.ssr) {\n            // Remove _document modifications if ssr is false.\n            delete base._document;\n        }\n        return base;\n    },\n};\n'))),(0,r.kt)(p.Z,{value:"react",mdxType:"TabItem"},(0,r.kt)("p",null," No need to add anything if React plugins are developing."))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"defining-custom-data"},"Defining Custom Data"),(0,r.kt)("p",null,"We're done for ",(0,r.kt)("inlineCode",{parentName:"p"},"_app")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"_document")," but in many plugins you may need different template data for each plugin. You can define and return custom data to your templates for every plugin. We used ",(0,r.kt)("inlineCode",{parentName:"p"},"testSetup")," property to handle wrappers in ",(0,r.kt)("strong",{parentName:"p"},"superplate"),"'s core plugins ",(0,r.kt)("inlineCode",{parentName:"p"},"testing-library")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"enzyme"),". These custom properties will be merged as well as ",(0,r.kt)("inlineCode",{parentName:"p"},"_app")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"_document"),". Here's an example for custom template data."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const base = {\n    testSetup: {\n        import: [\n            \'import { ThemeProvider } from "styled-components";\',\n        ],\n        inner: [\n            `const theme = {\n                main: "mediumseagreen"\n            }`,\n        ],\n        wrapper: [["<ThemeProvider theme={theme}>", "</ThemeProvider>"]],\n    },\n};\n\nmodule.exports = {\n    extend() {\n        return base;\n    },\n};\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We will not cover ",(0,r.kt)("inlineCode",{parentName:"p"},"testing-library")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"enzyme")," plugins in this article but if you wish to learn more about them; you can check out ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate-core-plugins/tree/master/plugins/testing-library"},"superplate-core-plugins/react-library"),"."))),(0,r.kt)("h2",{id:"custom-tsconfigjson"},"Custom ",(0,r.kt)("inlineCode",{parentName:"h2"},"tsconfig.json")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"superplate")," will take care of your plugin's ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," file just like your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," and it will merge every custom config you define when you create a new project. We've created an example component with styled-components. Let's add a path alias for our ",(0,r.kt)("inlineCode",{parentName:"p"},"components")," directory in our ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "compilerOptions": {\n        "paths": {\n            "@components/*": ["src/components/*"],\n            "@components": ["src/components"],\n        }\n    }\n}\n')),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"Create React App")," support importing modules using absolute paths. ",(0,r.kt)("a",{parentName:"p",href:"https://create-react-app.dev/docs/importing-a-component/#absolute-imports"},"Go to Docs \u2192"),"."))),(0,r.kt)("h2",{id:"custom-babelrc"},"Custom ",(0,r.kt)("inlineCode",{parentName:"h2"},".babelrc")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"Create React App")," doesn\u2019t need to install or configure tools like webpack or Babel. They are preconfigured and hidden so that you can focus on the code."))),(0,r.kt)("br",null),(0,r.kt)(i.Z,{defaultValue:"next",values:[{label:"Next.js",value:"next"},{label:"React",value:"react"}],mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"next",mdxType:"TabItem"},(0,r.kt)("p",null,"We will need a babel plugin to ensure consistency between the server and the client. Let's create a ",(0,r.kt)("inlineCode",{parentName:"p"},".babelrc")," file in our plugin to tell babel to use this plugin.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("strong",{parentName:"p"},"superplate")," will merge all babel config to one just like ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," files."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "presets": ["next/babel"],\n  "plugins": [["styled-components", { "ssr": true }]]\n}\n'))),(0,r.kt)(p.Z,{value:"react",mdxType:"TabItem"},(0,r.kt)("p",null,"Ignore this section if you are developing a React plugin."))),(0,r.kt)("h2",{id:"providing-a-plugin-description"},"Providing a Plugin Description"),(0,r.kt)("p",null,"We're using ",(0,r.kt)("inlineCode",{parentName:"p"},"meta.json")," to collect data about plugins. You can provide an url to the docs and a description for your plugin in ",(0,r.kt)("inlineCode",{parentName:"p"},"meta.json"),". Here's what we will use for ",(0,r.kt)("inlineCode",{parentName:"p"},"styled-components")," plugin:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "Styled Components",\n    "description": "Utilising tagged template literals (a recent addition to JavaScript) and the power of CSS, styled-components allows you to write actual CSS code to style your components.",\n    "url": "https://styled-components.com/docs"\n}\n')),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"We've created a plugin from scratch to add ",(0,r.kt)("inlineCode",{parentName:"p"},"styled-components")," to our next project with ",(0,r.kt)("strong",{parentName:"p"},"superplate"),". If you want to check out how we created different plugins, please check out ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate-core-plugins"},"superplate-core-plugins"),"."),(0,r.kt)("p",null,"To learn more about superplate's API, you can check out ",(0,r.kt)("a",{parentName:"p",href:"references"},"References"),"."))}g.isMDXComponent=!0},6010:function(e,n,t){function a(e){var n,t,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=a(e[n]))&&(o&&(o+=" "),o+=t);else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function o(){for(var e,n,t=0,o="";t<arguments.length;)(e=arguments[t++])&&(n=a(e))&&(o&&(o+=" "),o+=n);return o}t.d(n,{Z:function(){return o}})}}]);